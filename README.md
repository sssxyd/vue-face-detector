# js-face-detector

Vue 3 人脸检测组件 Demo，基于 [human.js](https://github.com/vladmandic/human) 实现。

## 功能特性

### 1. 人脸检测
- ✅ 检测视频中的人脸
- ✅ 验证有且仅有一张正脸
- ✅ 确保脸部完整
- ✅ 验证人脸占据画面的合适比例（15%-70%）
- ✅ 多种错误提示：
  - 未检测到人脸
  - 检测到多张人脸
  - 距离太远/太近
  - 请正对摄像头
  - 人脸不完整

### 2. 活体人脸检测（可选）
- ✅ 在人脸检测成功后，随机提示用户执行动作
- ✅ 支持的动作检测：
  - 张嘴
  - 眨眼
  - 左右摇头
- ✅ 检测过程中的安全验证：
  - 如果出现第二张人脸，检测失败
  - 如果人脸消失，检测失败

## 技术栈

- Vue 3
- Vite
- @vladmandic/human (人脸检测库)

## 安装和运行

### 安装依赖
```bash
npm install
```

### 开发模式
```bash
npm run dev
```

然后在浏览器中访问 `http://localhost:3000`

### 构建生产版本
```bash
npm run build
```

### 预览生产构建
```bash
npm run preview
```

## 使用说明

1. **开始人脸检测**：点击"开始人脸检测"按钮，允许浏览器访问摄像头
2. **调整位置**：根据提示调整与摄像头的距离和角度，直到检测成功
3. **活体检测**（可选）：检测成功后，点击"开始活体检测"按钮
4. **完成动作**：按照屏幕提示完成指定动作（张嘴、眨眼、摇头）
5. **检测完成**：所有动作完成后，活体检测成功

## 组件说明

### FaceDetector.vue

主要的人脸检测组件，包含以下功能：

- **视频流捕获**：从摄像头获取视频流
- **实时检测**：使用 human.js 进行实时人脸检测
- **视觉反馈**：在视频上绘制人脸边界框，不同颜色表示不同状态
  - 绿色：检测成功
  - 黄色：距离问题
  - 橙色：角度或多人问题
  - 蓝色：活体检测中
  - 红色：活体检测失败
- **状态提示**：实时显示检测状态和错误信息
- **活体检测**：随机选择2-3个动作进行验证

## 项目结构

```
js-face-detector/
├── index.html              # HTML 入口
├── package.json            # 项目配置
├── vite.config.js          # Vite 配置
├── src/
│   ├── main.js             # 应用入口
│   ├── App.vue             # 根组件
│   └── components/
│       └── FaceDetector.vue # 人脸检测组件
└── dist/                   # 构建输出目录
```

## 注意事项

1. 需要在 HTTPS 环境或 localhost 下运行，才能访问摄像头
2. 首次运行需要授予浏览器摄像头访问权限
3. 建议在光线充足的环境下使用
4. 支持现代浏览器（Chrome、Firefox、Safari、Edge）

## License

MIT